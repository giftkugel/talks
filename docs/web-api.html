<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<meta name="twitter:card" content="summary" />
		<meta name="twitter:site" content="@giftkugel" />
		<meta name="twitter:creator" content="@giftkugel" />
		<meta property="og:url" content="https://giftkugel.github.io/talks/" />
		<meta property="og:title" content="Web-APIs: The missing manual" />
		<meta property="og:description" content="Slides of my talk" />

		<title>Web-APIs &colon; The missing manual</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">
		
		<link rel="stylesheet" href="css/font.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
		<link rel="stylesheet" href="css/slides.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section class="header title">
					<div class="title main big">Web-APIs</div>
					<div>The missing manual</div>
					<div>&nbsp;</div>
					<div><a class="small" href="https://giftkugel.github.io/talks/" target="_blank" rel="noopener">https://giftkugel.github.io/talks/</a></div>
					<div class="smaller">or</div>
					<div><a class="small" href="https://bit.ly/2JdoLoG" target="_blank" rel="noopener">https://bit.ly/2JdoLoG</a></div>			
				</section>
				<section>
					<section class="footer">
						<div class="header before">About me</div>
						<div class="column aligend">
							<div>
								<div class="title">Simon Skoczylas</div>
								<div>Senior Software Engineer</div>
								<div><a href="https://www.karakun.com" class="invisible" target="_blank" rel="noopener"><img class="biggest" src="images/svg/karakun-logo.svg"></a></div>
								<div>&nbsp;</div>
								<div>
									<img class="raccoon-logo" src="images/svg/racoon.svg">
									<div><a href="https://dev.karakun.com" class="invisible" target="_blank" rel="noopener"><span class="my-karakun">Karakun</span> Developer Hub</a></div>
									<div class="smaller"><a href="https://dev.karakun.com" class="invisible" target="_blank" rel="noopener">https://dev.karakun.com</a></div>
								</div>
							</div>
							<div>&nbsp;</div>
							<div>&nbsp;</div>
							<div>
								<img src="images/profile.jpg">
								<div class="subtext"><a class="dark" href="https://www.twitter.com/giftkugel" target="_blank" rel="noopener"><img class="text" src="images/svg/094.svg">&nbsp;giftkugel</a></div>
								<div class="subtext"><a class="dark" href="https://www.skoczylas.net" target="_blank" rel="noopener"><img class="text" src="images/svg/211.svg">&nbsp;www.skoczylas.net</a></div>
							</div>
						</div>
					</section>
				</section>
				<section>
				<section class="footer">
						<div class="header before">Back in the days</div>
						<div class="title">Web application</div>
						<div class="distance fragment">... Internet Explorer (5, 6, 7, 8) ...</div>
					</section>
					<section class="footer">
						<div class="header before">Back in the days</div>
						<div class="distance"><a href="https://docs.oracle.com/javase/tutorial/deployment/applet/index.html" target="_blank" rel="noopener">Java Applets</a></div>
						<div class="distance fragment"><a href="https://get.adobe.com/de/flashplayer/" target="_blank" rel="noopener">and Adobe Flash</a> <a href="https://www.apple.com/hotnews/thoughts-on-flash/" class="small" target="_blank" rel="noopener">(Thoughts on Flash)</a></div>
						<div class="distance fragment">
							<div class="distance"><a href="https://techcrunch.com/2012/09/11/mark-zuckerberg-our-biggest-mistake-with-mobile-was-betting-too-much-on-html5">Mark Zuckerberg: Our Biggest Mistake Was Betting Too Much On HTML5</a></div>
							<div class="fragment"><img src="images/omg-doggo.gif" /></div>
						</div>
					</section>
					<section class="header footer title">
						<div class="title main">Web browser as "runtime environment"</div>
						<div class="distance fragment">with standardized APIs</div>
						<div class="fragment"><img src="images/love.gif" /></div>
					</section>
					<section class="footer header">
						<div class="title">HTML5</div>
						<div class="distance small"><a href="https://www.w3.org/TR/html5/" target="_blank" rel="noopener">https://www.w3.org/TR/html5/</a></div>
					</section>
					<section class="footer header">
						<div class="title">Web-APIs</div>
						<div class="distance small"><a href="https://developer.mozilla.org/kab/docs/Web/API" target="_blank" rel="noopener">https://developer.mozilla.org/kab/docs/Web/API</a></div>
					</section>
				</section>
				<section>
					<section class="list footer">
						<div class="header before">Overview</div>
						<div class="title distance">Web-APIs I</div>
						<div class="column">
							<div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model" target="_blank" rel="noopener">DOM</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener">Fetch</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/de/docs/Web/API/Web_Storage_API" target="_blank" rel="noopener">Web Storage</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation" target="_blank" rel="noopener">Geolocation</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API" target="_blank" rel="noopener">Web Workers</a>
								</div>
							</div>
							<div>
								<div>
									<a href="#/battery-status-api">Battery Status</a>
								</div>
								<div>
									<a href="#/page-visibility-api">PageVisibility</a>
								</div>
								<div>
									<a href="#/navigator-online-api">Navigator OnLine</a>
								</div>
								<div>
									<a href="#/notifications-api">Notifications</a>
								</div>
								<div>
									<a href="#/vibration-api">Vibration</a>
								</div>
								<div>
									<a href="#/network-information-api">Network Information</a>
								</div>
								<div>
									<a href="#/web-share-api">Web Share</a>
								</div>
							</div>
							<div>
								<div class="title">
									<a href="#/service-worker-api">Service Worker</a>
								</div>	
								<div>
									<a href="#/cache-api">Cache</a>
								</div>
								<div>
									<a href="#/push-api">Push</a>
								</div>
								<div>
									<a href="#/background-sync-api">Background Sync</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/de/docs/Web/Manifest" target="_blank" rel="noopener">Web App Manifest</a>
								</div>
							</div>
						</div>
					</section>
					<section class="list footer">
						<div class="header before">Overview</div>
						<div class="title distance">Web-APIs II</div>
						<div class="column">
							<div>
								<div>
									<a href="#/web-speech-api">Web Speech</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/de/docs/Web/API/WebSocket" target="_blank" rel="noopener">Web Socket</a>
								</div>
								<div>
									<a href="#/web-bluetooth-api">Web Bluetooth</a>
								</div>
								<div class="experimental">
									<a href="#/web-usb-api">Web USB</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API" target="_blank" rel="noopener">Web Audio</a>
								</div>
								<div class="experimental">
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API" target="_blank" rel="noopener">Web Crypto</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Payment_Request_API" target="_blank" rel="noopener">Payment Request</a>
								</div>
								<div class="experimental">
									<a href="#/web-credentials-api">Credential Management</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API" target="_blank" rel="noopener">WebRTC</a>
								</div>
							</div>
							<div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API" target="_blank" rel="noopener">IndexedDB</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events" target="_blank" rel="noopener">Server-Sent Events</a>
								</div>
								<div>
									<a href="#/server-timing-api">Server Timing</a>
								</div>
								<div>
									<a href="#/navigation-timing-api">Navigation Timing</a>
								</div>
								<div>
									<a href="https://www.w3.org/TR/generic-sensor/" target="_blank" rel="noopener">Generic Sensor</a>
								</div>
								<div class="hidden">
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/FileSystem" target="_blank" rel="noopener">FileSystem</a>
								</div>
								<div class="experimental">
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Streams_API" target="_blank" rel="noopener">Streams</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API" target="_blank" rel="noopener">Gamepad</a>
								</div>
							</div>
							<div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API" target="_blank" rel="noopener">Canvas</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard" target="_blank" rel="noopener">Clipboard</a>
								</div>
								<div class="experimental">
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Selection" target="_blank" rel="noopener">Selection</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Presentation_API" target="_blank" rel="noopener">Presentation</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API" target="_blank" rel="noopener">Fullscreen</a>
								</div>
								<div>
									<a href="https://wicg.github.io/shape-detection-api/" target="_blank" rel="noopener">Shape Detection</a>
								</div>
								<div>
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API" target="_blank" rel="noopener">WebGL</a>
								</div>
								<div class="experimental">
									<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebVR_API" target="_blank" rel="noopener">WebVR</a>
								</div>
							</div>
						</div>
					</section>
					<section class="list footer">
						<div class="header before">Overview</div>
						<div class="title distance"><a href="https://houdini.glitch.me/"  target="_blank" rel="noopener">CSS Houdini</a></div>
						<div class="column">
							<div>
								<div>
									<a href="https://drafts.css-houdini.org/worklets/" target="_blank" rel="noopener">Worklets</a>
								</div>
								<div>
									<a href="https://drafts.css-houdini.org/css-properties-values-api/" target="_blank" rel="noopener">CSS Properties and Values</a>
								</div>
								<div>
									<a href="https://drafts.css-houdini.org/css-paint-api/" target="_blank" rel="noopener">CSS Painting</a>
								</div>
								<div>
									<a href="https://drafts.css-houdini.org/css-layout-api/" target="_blank" rel="noopener">CSS Layout</a>
								</div>
								<div>
									<a href="https://drafts.css-houdini.org/css-typed-om/" target="_blank" rel="noopener">CSS Typed OM</a>
								</div>
								<div>
									<a href="https://drafts.css-houdini.org/css-animationworklet/" target="_blank" rel="noopener">CSS Animation Worklet</a>
								</div>
							</div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Status</div>
						<div class="title distance">Current status</div>
						<div class="distance small"><a href="https://platform-status.mozilla.org/" target="_blank" rel="noopener">https://platform-status.mozilla.org/</a></div>
						<div class="distance small"><a href="https://webkit.org/status/" target="_blank" rel="noopener">https://webkit.org/status/</a></div>
						<div class="distance small"><a href="https://www.chromestatus.com/features" target="_blank" rel="noopener">https://www.chromestatus.com/features</a></div>
						<div class="distance small"><a href="https://developer.microsoft.com/en-us/microsoft-edge/platform/status/" target="_blank" rel="noopener">https://developer.microsoft.com/en-us/microsoft-edge/platform/status/</a></div>
						<div>***</div>
						<div class="distance"><a href="https://caniuse.com/" target="_blank" rel="noopener">https://caniuse.com/</a></div>
					</section>
					<section class="footer">
						<div class="header before">Feature detection</div>
						<div class="title distance">Feature detection</div><!-- https://simpl.info/ -->
						<div class="distance small"><a href="https://html5test.com/" target="_blank" rel="noopener">https://html5test.com/</a></div>
						<div class="distance small"><a href="https://whatwebcando.today/" target="_blank" rel="noopener">https://whatwebcando.today/</a></div>
					</section>
					<section class="header footer">
						<div class="title distance">It's great to be a Web developer these days</div>
						<div class="big"><img src="images/barney-top.gif" /></div>
					</section>
				</section>
				<section id="battery-status-api">
						<section class="header footer title">
							<div class="title main">Battery Status API</div>
							<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Battery_Status_API" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Battery_Status_API</a></div>
							<div class="distance smaller"><a href="https://www.w3.org/TR/battery-status/" target="_blank" rel="noopener">https://www.w3.org/TR/battery-status/</a></div>
						</section>
						<section class="footer left">
							<div class="header before">Battery Status API</div>
							<div class="row">
								<div class="distance">
									<div>Provides information about the battey charge level</div>
								</div>
								<div class="distance fragment">
									<div>Notifes about changes</div>
								</div>
								<div class="distance fragment">
									<div id="battery-status"></div>
								</div>
								<div class="distance fragment">
									<div id="battery-charging"></div>
								</div>
								<div class="distance fragment">
									<div>Removed from <a href="https://groups.google.com/forum/#!msg/mozilla.dev.platform/5U8NHoUY-1k/9ybyzQIYCAAJ" target="_blank" rel="noopener">Mozilla</a> and <a href="https://trac.webkit.org/changeset/208300/webkit"  target="_blank" rel="noopener">WebKit</a> 😵</div>
								</div>
							</div>
						</section>
						<section class="footer top">
							<div class="header before">Battery Status API</div>
							<div class="row">
								<div>Snippet</div>
								<pre><code class="javascript stretch">
if (navigator.getBattery) {
	navigator.getBattery().then((battery) => {
		// battery.level (0 - 1)
		// battery.charging (true, false)

		battery.addEventListener('chargingchange', function(event) { this ... });

		battery.addEventListener('levelchange', function(event) { this ... });

		battery.addEventListener('chargingtimechange', function(event) { this ... });

		battery.addEventListener('dischargingtimechange', function(event) { this ... });
	});
}
								</code></pre>
							</div>
						</section>
						<section class="footer">
							<div class="header before">Battery Status API</div>
							<div class="title distance">Browser compatibility</div>
							<div class="column ciu_embed" data-feature="battery-status" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
								<a href="http://caniuse.com/#feat=battery-status">
									<picture>
										<img src="images/battery-status-2019-3-14.png">
									</picture>
								</a>
							</div>
						</section>
				</section>
				<section id="page-visibility-api">
						<section class="header footer title">
							<div class="title main">Page Visibility API</div>
							<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API</a></div>
							<div class="distance smaller"><a href="https://www.w3.org/TR/page-visibility-2/" target="_blank" rel="noopener">https://www.w3.org/TR/page-visibility-2/</a></div>
						</section>
						<section class="footer left">
							<div class="header before">Page Visibility API</div>
							<div class="row">
									<div class="distance">
									<div>Provides the visiblity state of the current document</div>
								</div>
								<div class="distance fragment">
									<div>Notifies when the document becomes hidden or visible</div>
								</div>
								<div class="distance fragment">
									<div>Can be used to stop/pause long or expensive tasks</div>
								</div>
								<div class="distance fragment">
									<div id="visibility-status"></div>
								</div>
							</div>
						</section>
						<section class="footer top">
							<div class="header before">Page Visibility API</div>
							<div class="row">
								<div>Snippet</div>
								<pre><code class="javascript stretch">
// document.hidden (true, false)
// document.visibilityState (visible, hidden, prerender)
document.addEventListener('visibilitychange', (event) => {});
								</code></pre>
							</div>
						</section>
						<section class="footer">
							<div class="header before">Page Visibility API</div>
							<div class="title distance">Demo</div>
							<div class="distance"><a href="http://daniemon.com/tech/webapps/page-visibility/" target="_blank" rel="noopener">http://daniemon.com/tech/webapps/page-visibility/</a></div>
						</section>
						<section class="footer">
							<div class="header before">Page Visibility API</div>
							<div class="title distance">Browser compatibility</div>
							<div class="column ciu_embed" data-feature="pagevisibility" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
								<a href="http://caniuse.com/#feat=pagevisibility">
									<picture>
										<img src="images/pagevisibility-2019-3-14.png" alt="Data on support for the pagevisibility feature across the major browsers from caniuse.com">
									</picture>
								</a>
							</div>
						</section>
				</section>
				<section id="navigator-online-api">
					<section class="header footer title">
						<div class="title main">NavigatorOnLine</div>
						<div class="distance small">aka Browser state</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine</a></div>
						<div class="distance smaller"><a href="https://www.w3.org/TR/html5/browsers.html#browser-state" target="_blank" rel="noopener">https://www.w3.org/TR/html5/browsers.html#browser-state</a></div>
					</section>
					<section class="footer left">
						<div class="header before">NavigatorOnLine</div>
						<div class="row">
								<div class="distance">
								<div>Provides information about the connectivity status of the browser</div>
							</div>
							<div class="distance fragment">
								<div>Notifies when the connectivity changes</div>
							</div>
							<div class="distance fragment">
								<div id="online-status"></div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">NavigatorOnLine</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
// navigator.onLine (true, false)
window.addEventListener('offline', (event) => {});
window.addEventListener('online', (event) => {});
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">NavigatorOnLine</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column ciu_embed" data-feature="online-status" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="http://caniuse.com/#feat=online-status">
								<picture>
									<img src="images/online-status-2019-3-14.png">
								</picture>
							</a>
						</div>
					</section>
				</section>
				<section id="notifications-api">
					<section class="header footer title">
						<div class="title main">Notifications API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API</a></div>
						<div class="distance smaller"><a href="https://www.w3.org/TR/notifications/" target="_blank" rel="noopener">https://www.w3.org/TR/notifications/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Notifications API</div>
						<div class="row">
							<div class="distance">
								<div>Allows web pages to control system notifications</div>
							</div>
							<div class="distance fragment">
								<div>ServiceWorker got some additional abilities for notifications</div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Notifications API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
// Notification.permission (denied, granted, default)

Notification.requestPermission().then((permission) => {});

new Notification("A fancy notification", options);
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Notifications API</div>
						<div class="title distance">Demo</div>
						<div class="distance">
							<div><input class="normal" type="text" id="notification-input"><input class="normal" type="button" value="Request" id="notification-request-button" disabled="disabled"><input class="normal" type="button" value="Notify" id="notification-notify-button" disabled="disabled"></div>
						</div>
						<div class="smaller" id="notification-status"></div>
					</section>
					<section class="footer">
						<div class="header before">Notifications API</div>
						<div class="title distance"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Notification/Notification" target="_blank" rel="noopener">Options</a></div>
						<div class="column">
							<div>
								<div>dir</div>
								<div>lang</div>
								<div>body</div>
								<div>badge</div>
								<div>icon</div>
								<div>image</div>
							</div>
							<div>
								<div>data</div>
								<div>vibrate</div>
								<div>renotify</div>
								<div>tag</div>
								<div>requireInteraction</div>
								<div>actions*</div>
							</div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Notifications API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column ciu_embed" data-feature="notifications" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="http://caniuse.com/#feat=notifications">
								<picture>
									<img src="images/notifications-2019-3-14.png">
								</picture>
							</a>
						</div>
					</section>
				</section>
				<section id="vibration-api">
					<section class="header footer title">
						<div class="title main">Vibration API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Vibration_API" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Vibration_API</a></div>
						<div class="distance smaller"><a href="https://www.w3.org/TR/vibration/" target="_blank" rel="noopener">https://www.w3.org/TR/vibration/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Vibration API</div>
						<div class="row">
							<div class="distance">
								<div>Offers the ablity to access the vibration hardware</div>
							</div>
							<div class="distance fragment">
								<div>Does not work with display disabled ... <span class="fragment">🤨</span></div>
							</div>
							<div class="distance fragment">
								<div class="distance">Shakes your device!</div>
								<div><img src="images/vibrate.gif" /></div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Vibration API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
navigator.vibrate(500);

navigator.vibrate([500, 250, 500, 250, 500, 250, 500, 250, 500, 250, 500]);

navigator.vibrate(0); // stop vibration
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Vibration API</div>
						<div class="title distance">Demo</div>
						<div class="distance">
							<div><input class="normal" type="button" value="Vibrate after 5 seconds" id="vibration-start-button" disabled="disabled"><input class="normal" type="button" value="Stop" id="vibration-stop-button" disabled="disabled"></div>
						</div>
						<div class="smaller distance" id="vibration-status">&nbsp;</div>
						<div class="smaller fragment"><a href="https://gearside.com/custom-vibration-patterns-mobile-devices/">https://gearside.com/custom-vibration-patterns-mobile-devices/</a></div>
					</section>
					<section class="footer">
						<div class="header before">Vibration API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column distance ciu_embed" data-feature="vibration" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="http://caniuse.com/#feat=vibration">
								<picture>
									<img src="images/vibration-2019-3-14.png" alt="Data on support for the vibration feature across the major browsers from caniuse.com">
								</picture>
							</a>
						</div>
						<div class="column small">Mostly supported by mobile browsers</div>
					</section>
				</section>
				<section id="network-information-api">
					<section class="header footer title">
						<div class="title main">Network Information API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API</a></div>
						<div class="distance smaller"><a href="http://wicg.github.io/netinfo/" target="_blank" rel="noopener">http://wicg.github.io/netinfo/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Network Information API</div>
						<div class="row">
								<div class="distance">
								<div>Provides information about the network connection</div>
							</div>
							<div class="distance">
								<div id="network-info-status"></div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Network Information API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
// navigator.connection.type (bluetooth, cellular, ethernet, wifi, ...)
// navigator.connection.downlink
// navigator.connection.downlinkMax
// navigator.connection.effectiveType (slow-2g, 2g, 3g, 4g)
// navigator.connection.saveData (true, false)
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Network Information API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column ciu_embed" data-feature="netinfo" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="http://caniuse.com/#feat=netinfo">
								<picture>
									<img src="images/netinfo-2019-3-14.png">
								</picture>
							</a>
						</div>					
					</section>
				</section>
				<section id="service-worker-api">
					<section class="header footer title">
						<div class="title main">Service Worker API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API</a></div>
						<div class="distance smaller"><a href="https://www.w3.org/TR/service-workers//" target="_blank" rel="noopener">https://www.w3.org/TR/service-workers/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Service Worker API</div>
						<div class="row aligned">
							<div class="distance">
								<div>Service Worker is a script that runs in the background</div>
								<div class="fragment italic small">Provides: Cache API, Push API, Background Sync API</div>
							</div>
							<div class="fragment distance">
								<div>As a Worker it can't access the DOM directly</div>
							</div>
							<div class="fragment distance">
									<div>Can communicate with the page via the <a href="https://html.spec.whatwg.org/multipage/workers.html#dom-worker-postmessage" target="_blank" rel="noopener">postMessage</a> interface</div>
								</div>
							<div class="fragment distance">
								<div>It's a programmable network proxy, allowing you to control how network requests are handled</div>
								<div class="center">
									<img class="bigger" src="images/svg/130.svg">&nbsp;
									<img class="icon big" src="images/svg/ic_compare_arrows_black_48px.svg" style="position: relative; top: -0.2em;">&nbsp;
									<img class="icon rotating bigger" src="images/svg/ic_settings_black_48px.svg" style="position: relative; top: 0.3em;" alt="Service Worker">&nbsp;
									<img class="icon big" src="images/svg/ic_compare_arrows_black_48px.svg" style="position: relative; top: -0.2em;">&nbsp;
									<img class="bigger" src="images/svg/005.svg" style="position: relative; top: 0.3em;">
								</div>
							</div>
						</div>
					</section>
					<section class="footer left title">
						<div class="header before">Service Worker API</div>
						<div class="title medium">Enables Progressive Web Apps</div>
					</section>
					<section class="footer left">
						<div class="header before">Service Worker API</div>
						<div class="row aligned">
							<div class="distance">Requires HTTPS</div>
							<div class="fragement distance">Works without HTTPS on localhost (for development)</div>
							<div class="fragement small distance">Requirement can be disabled through browser settings 🤫</div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Service Worker API</div>
						<div class="title distance">Lifecycle</div>
						<div>
							<img class="sub" src="images/svg/lifecycle.svg">
						</div>
					</section>
					<section class="footer">
						<div class="header before">Service Worker API</div>
						<div>Register your service worker</div>
						<pre><code class="javascript">
if ('serviceWorker' in navigator) {
	navigator.serviceWorker.register('/sw.js');
}
						</code></pre>
						<div class="fragment small">Easy 😍</div>
					</section>
					<section class="footer">
						<div class="header before">Service Worker API</div>
						<div>Maybe add a scope, wait for an event and handle result?</div>
						<pre><code class="javascript">
if ('serviceWorker' in navigator) {
	window.addEventListener('load', function() {
		navigator.serviceWorker.register('/sw.js', {scope: './'})
		.then((registration) => { ... })
		.catch((error) => { ... });
	});
}
						</code></pre>
						<div class="fragment small"><a href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration-interface" target="_blank" rel="noopener">ServiceWorkerRegistration</a></div>
					</section>
					<section class="footer">
						<div class="header before">Service Worker API</div>
						<div class="title">this and self</div>
						<div class="distance">Both points to the <a href="https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope-interface" target="_blank" rel="noopener">ServiceWorkerGlobalScope</a></div>
						<div>Use <span class="italic">self</span>, because you never get a guarantee about <span class="italic">this</span> 😱</div>
					</section>
					<section class="footer">
						<div class="header before">Service Worker API</div>
						<div>Service Worker Events</div>
						<pre><code class="javascript">
self.addEventListener('install', (event) => { ... }); // InstallEvent

self.addEventListener('activate', (event) => { ... }); // ExtendableEvent

self.addEventListener('message', (event) => { ... }); // MessageEvent
						</code></pre>
						<div class="small">aka ExtendableEvent</div>
					</section>
					<section class="footer">
						<div class="header before">Service Worker API</div>
						<div>Service Worker Functional Events</div>
						<pre><code class="javascript">
self.addEventListener('fetch', (event) => { ... }); // FetchEvent

self.addEventListener('sync', (event) => { ... }); // SyncEvent

self.addEventListener('push', (event) => { ... }); // PushEvent
						</code></pre>
						<div class="small">aka ExtendableEvent</div>
					</section>
					<section class="footer">
						<div class="header before">Service Worker API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column distance ciu_embed" data-feature="serviceworkers" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="http://caniuse.com/#feat=serviceworkers">
								<picture>
									<img src="images/serviceworkers-2019-3-14.png">
								</picture>
							</a>
						</div>	
						<div class="small"><a href="https://jakearchibald.github.io/isserviceworkerready/" target="_blank" rel="noopener">https://jakearchibald.github.io/isserviceworkerready/</a></div>
					</section>
				</section>
				<section id="cache-api">
					<section class="header footer title">
						<div class="title main">Cache API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/de/docs/Web/API/Cache" target="_blank" rel="noopener">https://developer.mozilla.org/de/docs/Web/API/Cache</a></div>
						<div class="distance smaller"><a href="https://www.w3.org/TR/service-workers/#cache-objects" target="_blank" rel="noopener">https://www.w3.org/TR/service-workers/#cache-objects</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Cache API</div>
						<div class="row">
							<div class="distance">
								<div>Provides a storage mechanisim for Request/Response pairs</div>
							</div>
							<div class="distance fragment">
								<div>Actually for the Service Worker, but can be used outside</div>
							</div>
							<div class="distance fragment">
								<div>Consists of CacheStorage and Cache</div>
							</div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Cache API</div>
						<div class="row aligned">
							<div>
								<div class="center distance">
									<img class="bigger" src="images/svg/130.svg">&nbsp;
									<img class="icon big" src="images/svg/ic_compare_arrows_black_48px.svg" style="position: relative; top: -0.2em;">&nbsp;
									<img class="icon rotating bigger" src="images/svg/ic_settings_black_48px.svg" style="position: relative; top: 0.3em;" alt="Service Worker">&nbsp;
									<img class="icon big" src="images/svg/ic_compare_arrows_black_48px.svg" style="position: relative; top: -0.2em;">&nbsp;
									<img class="bigger" src="images/svg/005.svg" style="position: relative; top: 0.3em;">
								</div>
								<div class="center distance">
									<img class="icon big" src="images/svg/ic_compare_arrows_black_48px.svg" style="position: relative; left: 0.05em; transform: rotate(90deg);">&nbsp;
								</div>
								<div class="center">
									<img class="icon big" src="images/svg/338.svg" style="position: relative; left: 0.05em">&nbsp;
								</div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Cache API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
caches.open(name).then((cache) => {}); // CacheStorage
caches.has(name).then((boolean) => {}); // CacheStorage
caches.keys(name).then((array) => {}); // CacheStorage
caches.delete(name).then((boolean) => {}); // CacheStorage

cache.match(request, options)
cache.matchAll(request, options)

cache.add(request)
cache.addAll(requests)
cache.put(request, response)

cache.delete(request, options)
cache.keys(request, options)
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Cache API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column distance ciu_embed" data-feature="serviceworkers" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="http://caniuse.com/#feat=serviceworkers">
								<picture>
									<img src="images/serviceworkers-2019-3-14.png">
								</picture>
							</a>
						</div>	
						<div class="distance small">Just as with the Service Worker API</div>
					</section>
				</section>
				<section id="push-api">
					<section class="header footer title">
						<div class="title main">Push API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/de/docs/Web/API/Push_API" target="_blank" rel="noopener">https://developer.mozilla.org/de/docs/Web/API/Push_API</a></div>
						<div class="distance smaller"><a href="https://www.w3.org/TR/push-api/" target="_blank" rel="noopener">https://www.w3.org/TR/push-api/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Push API</div>
						<div class="row">
							<div class="distance">
								<div>Provides the ability to receive messages pushed from a server</div>
							</div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Push API</div>
						<div class="title distance">Subscription</div>
						<div class="row aligned">
							<div>
								<div class="center distance">
									<img class="bigger" src="images/svg/130.svg">&nbsp;
									<img class="icon big" src="images/svg/ic_compare_arrows_black_48px.svg" style="position: relative; top: -0.2em;">&nbsp;
									<img class="icon rotating bigger" src="images/svg/ic_settings_black_48px.svg" style="position: relative; top: 0.3em;" alt="Service Worker">&nbsp;
									<img class="icon big" src="images/svg/ic_compare_arrows_black_48px.svg" style="position: relative; top: -0.2em;">&nbsp;
									<img class="bigger" src="images/svg/028.svg" style="position: relative; top: 0.3em;">
								</div>
							</div>
							<div>Page - Service Worker - Push Service</div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Push API</div>
						<div class="title distance">Notification</div>
						<div class="row aligned">
							<div>
								<div class="center distance">
									<img class="bigger" src="images/svg/263.svg">&nbsp;
									<img class="icon big" src="images/svg/ic_compare_arrows_black_48px.svg" style="position: relative; top: -0.2em;">&nbsp;
									<img class="icon bigger" src="images/svg/028.svg" style="position: relative; top: 0.3em;" alt="Service Worker">&nbsp;
									<img class="icon big" src="images/svg/ic_compare_arrows_black_48px.svg" style="position: relative; top: -0.2em;">&nbsp;
									<img class="rotating bigger" src="images/svg/ic_settings_black_48px.svg" style="position: relative; top: 0.3em;">
								</div>
							</div>
							<div>Server - Push Service - Service Worker</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Push API</div>
						<div class="row">
							<div>Snippet (Subscribe)</div>
							<pre><code class="javascript stretch">
// const applicationServerKey = urlBase64ToUint8Array(applicationServerPublicKey);
navigator.serviceWorker.register('/sw.js').then((registration) => {
	// user interaction, then:
	registration.pushManager.getSubscription().then((subscription) => {
		if (subscription == null) {
			registration.pushManager.subscribe({
				userVisibleOnly: true,
				applicationServerKey: applicationServerKey
			})
			.then((newSubscription) => { /* store on server */ })
			.catch((error) => {});
		}
	}, (error) => {});
});
							</code></pre>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Push API</div>
						<div class="row">
							<div>Snippet (Handle push in Service Worker)</div>
							<pre><code class="javascript stretch">
self.addEventListener('push', (event) => {
	const text = event.data.text();
	const title = 'Push notification!';
	const options = {
		body: text
	};
	event.waitUntil(self.registration.showNotification(title, options));
});
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Push API</div>
						<div class="row">
							<div class="title">Web Push Protocol</div>
							<div class="distance smaller">
								<div><a href="https://tools.ietf.org/html/draft-ietf-webpush-protocol-12"  target="_blank" rel="noopener">https://tools.ietf.org/html/draft-ietf-webpush-protocol-12</a></div>
							</div>
							<div class="">
								<div>Server libraries</div>
							</div>
							<div class="smaller">
								<a href="https://github.com/web-push-libs"  target="_blank" rel="noopener">https://github.com/web-push-libs</a>
							</div>
							<div class="smaller">Node.js, Java, PHP, Pyhton, C#</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Push API</div>
						<div class="row">
							<div>Snippet (Server-side with Node.js)</div>
							<pre><code class="javascript stretch">
const webpush = require('web-push');

const vapidKeys = {
	publicKey: /* public key */,
	privateKey: /* private key */
}

webpush.setVapidDetails(
	'mailto:some@example.com',
	vapidKeys.publicKey,
	vapidKeys.privateKey
);

webpush.sendNotification(subscription, text);
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Push API</div>
						<div class="title distance">Demo</div>
						<div class="distance">
							<div><input class="normal" type="button" value="Request" id="push-request-button" disabled="disabled"></div>
						</div>
						<div id="push-subscription-content" class="hidden">
							<div class="small">Subscription</div>
							<div class="smallest margin" id="push-subscription"></div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Push API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column ciu_embed" data-feature="push-api" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="http://caniuse.com/#feat=push-api">
								<picture>
									<img src="images/push-api-2019-3-14.png">
								</picture>
							</a>
						</div>	
					</section>
				</section>
				<section id="background-sync-api">
					<section class="header footer title">
						<div class="title main">Background Sync API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/SyncManager" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/SyncManager</a></div>
						<div class="distance smaller"><a href="http://wicg.github.io/BackgroundSync/spec/" target="_blank" rel="noopener">http://wicg.github.io/BackgroundSync/spec/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Background Sync API</div>
						<div class="row">
							<div class="distance">
								<div>Provides a synchronization event for the Service Worker</div>
							</div>
							<div class="distance fragment">
								<div>Unlike <a href="#/navigator-online-api">NavigatorOnline</a>, the event can also be triggered when the page is not open</div>
							</div>
							<div class="distance fragment">
								<div>Will be triggered instant, or when the device regains connectivity</div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Background Sync API</div>
						<div class="row">
							<div>Snippet (Registration)</div>
							<pre><code class="javascript stretch">
navigator.serviceWorker.register('/sw.js').then((registration) => {
	registration.sync.register('web-api-sync');
});
							</code></pre>
							<div>Snippet (Service Worker usage)</div>
							<pre><code class="javascript stretch">
self.addEventListener('sync', (event) => {
	if (event.tag === 'web-api-sync') {
		/* do sync stuff */
	}
});
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Background Sync API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column ciu_embed" data-feature="background-sync" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="http://caniuse.com/#feat=background-sync">
								<picture>
									<img src="images/background-sync-2019-3-14.png">
								</picture>
							</a>
						</div>	
					</section>
				</section>
				<section id="web-speech-api">
					<section class="header footer title">
						<div class="title main">Web Speech API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API</a></div>
						<div class="distance smaller"><a href="https://w3c.github.io/speech-api/" target="_blank" rel="noopener">https://w3c.github.io/speech-api/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Web Speech API</div>
						<div class="row">
							<div class="distance">
								<div>Provides the ablity to handle voice data</div>
							</div>
							<div class="distance fragment">
								<div>Text-to-Speech</div>
							</div>
							<div class="distance fragment">
								<div>Asynchronous Speech Recognition <span class="fragment">(network)</span></div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Web Speech API</div>
						<div class="row">
							<div>Snippet (Text-to-speech)</div>
							<pre><code class="javascript stretch">
const utterance = new SpeechSynthesisUtterance('Hallo Welt!');
// lang, pitch, rate, voice, volume
utterance.lang = 'de'
speechSynthesis.speak(utterance);
							</code></pre>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Web Speech API</div>
						<div class="row">
							<div>Snippet (Speech Recognition)</div>
							<pre><code class="javascript stretch">
const grammar = '#JSGF V1.0; grammar ...';
const recognition = new webkitSpeechRecognition();
const speechRecognitionList = new webkitSpeechGrammarList();
speechRecognitionList.addFromString(grammar, 1);
recognition.grammars = speechRecognitionList;

recognition.lang = 'en-US';
recognition.interimResults = false;
recognition.maxAlternatives = 1;

recognition.onresult = (event) => {}
recognition.start();
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Web Speech API</div>
						<div class="title distance">Demo</div>
						<div class="distance">
							<div class="hidden hide-pdf" id="speech-wrapper">
								<div><select class="smaller" id="speech-voices"></select></div>
								<div><input class="normal" type="text" id="speech-input"> <input class="normal" type="button" value="Say" id="speech-button"></div>
							</div>
						</div>
						<div class="smaller">&nbsp;</div>
						<div class="smaller"><a href="https://mdn.github.io/web-speech-api/speech-color-changer/" target="_blank" rel="noopener">https://mdn.github.io/web-speech-api/speech-color-changer/</a></div>
					</section>
					<section class="footer">
						<div class="header before">Web Speech API</div>
						<div class="title">Browser compatibility</div>
						<div class="title distance smaller">Text-to-Speech</div>
						<div class="column ciu_embed" data-feature="speech-synthesis" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="https://caniuse.com/#feat=speech-synthesis">
								<picture>
									<img src="images/speech-synthesis-2019-3-14.png">
								</picture>
							</a>
						</div>
					</section>
					<section class="footer">
							<div class="header before">Web Speech API</div>
							<div class="title">Browser compatibility</div>
							<div class="title distance smaller">Speech Recognition</div>
							<div class="column ciu_embed" data-feature="speech-recognition" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
								<a href="https://caniuse.com/#feat=speech-recognition">
									<picture>
										<img src="images/speech-recognition-2019-3-14.png">
									</picture>
								</a>
							</div>
					</section>
				</section>
				<section id="web-bluetooth-api">
					<section class="header footer title">
						<div class="title main">Web Bluetooth API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Bluetooth_API" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Web_Bluetooth_API</a></div>
						<div class="distance smaller"><a href="https://webbluetoothcg.github.io/web-bluetooth/" target="_blank" rel="noopener">https://webbluetoothcg.github.io/web-bluetooth/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Web Bluetooth API</div>
						<div class="row">
								<div class="distance">
								<div>Provides the ability to connect and interact with Bluetooth Low Energy peripherals</div>
							</div>
							<div class="distance">
								<div><span id="heart-rate-status" class="pulse"></span><span>&nbsp;&nbsp;&nbsp;</span><span id="heart-rate-status-value"></span><span>&nbsp;</span><span id="heart-rate-status-name"></span></div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Web Bluetooth API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
let options = {
	filters: [
		{services: ['heart_rate']}
	],
	optionalServices: ['battery_service']
}
	
navigator.bluetooth.requestDevice([options]).then((bluetoothDevice) => { ... })
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Web Bluetooth API</div>
						<div class="title distance">Demo</div>
						<div><a href="https://webbluetoothcg.github.io/demos/heart-rate-sensor/" target="_blank" rel="noopener">https://webbluetoothcg.github.io/demos/heart-rate-sensor/</a></div>
					</section>
					<section class="footer">
						<div class="header before">Web Bluetooth API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column ciu_embed" data-feature="web-bluetooth" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="https://caniuse.com/#feat=web-bluetooth">
								<picture>
									<img src="images/web-bluetooth-2019-3-14.png">
								</picture>
							</a>
						</div>
					</section>
				</section>
				<section id="web-share-api">
					<section class="header footer title">
						<div class="title main">Web Share API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/share" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Navigator/share</a></div>
						<div class="distance smaller"><a href="https://wicg.github.io/web-share/" target="_blank" rel="noopener">https://wicg.github.io/web-share/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Web Share API</div>
						<div class="row">
								<div class="distance">
								<div>Provides the possiblity to use the native sharing mechanisim</div>
							</div>
							<div class="distance">
								<div><input id="web-share-button" disabled="disabled" type="button" class="normal" value="Share!" /></div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Web Share API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
navigator.share({
	title: 'Web-APIs',
	text: 'Check out this talk — it rocks!',
	url: 'https://giftkugel.github.io/talks/web-api.html#/'
})
.then(() => console.log('Yay!'))
.catch((error) => console.log('D´oh', error));
							</code></pre>
						</div>
					</section>
					<section class="header footer">
						<div class="row">
							<div class="middle">
								<img class="sub" src="images/Screenshot-Web-Share-API-1.png">
								<img class="sub" src="images/Screenshot-Web-Share-API-2.png">
							</div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Web Share API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column ciu_embed" data-feature="web-share" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="https://caniuse.com/#feat=web-share">
								<picture>
									<img src="images/web-share-2019-3-14.png">
								</picture>
							</a>
						</div>
						<div class="column">Currently only in Chrome on Android, on the way for&nbsp;<a href="https://twitter.com/viticci/status/1089222768976187393/" target="_blank" rel="noopener">iOS (12.2)</a></div>
					</section>
				</section>
				<section id="web-usb-api">
					<section class="header footer title">
						<div class="title main">Web USB API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/USB" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/USB</a></div>
						<div class="distance smaller"><a href="https://wicg.github.io/webusb/" target="_blank" rel="noopener">https://wicg.github.io/webusb/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Web USB API</div>
						<div class="row">
							<div class="distance">
								<div>Provides the ability to connect and interact with USB peripherals</div>
							</div>
							<div class="distance">
								<div><input id="web-usb-button" disabled="disabled" type="button" class="normal" value="Connect" /></div>
							</div>
							<div class="distance">
								<div id="web-usb-info"></div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Web USB API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
// Request USB device
device = navigator.usb.requestDevice({ 
	filters: [{
		vendorId: 3368,
		productId: 516
	}]
}).then((devices) => { ... });

// Get already requested devices
navigator.usb.getDevices().then((requestedDevice) => { ... });
							</code></pre>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Web USB API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
device.open()
.then(() => device.selectConfiguration(1)) // Select configuration #1 for the device.
.then(() => device.claimInterface(2)) // Request exclusive control over interface #2.
.then(() => device.controlTransferOut({ options })) // Ready to receive data
.then(() => device.transferIn(5, 64)) // Waiting for 64 bytes of data from endpoint #5.
.then(result => { ... })
.catch(error => { console.log(error); });
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Web USB API</div>
						<div class="title distance">Further reading</div>
						<div class="distance"><a href="https://developers.google.com/web/updates/2016/03/access-usb-devices-on-the-web" target="_blank" rel="noopener">https://developers.google.com/web/updates/2016/03/access-usb-devices-on-the-web</a></div>
						<div><a href="https://github.com/webusb/arduino" target="_blank" rel="noopener">https://github.com/webusb/arduino</a></div>
					</section>
					<section class="footer">
						<div class="header before">Web USB API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column ciu_embed" data-feature="webusb" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="https://caniuse.com/#feat=webusb">
								<picture>
									<img src="images/webusb-2019-3-14.png">
								</picture>
							</a>
						</div>
					</section>
				</section>
				<section id="web-credentials-api">
					<section class="header footer title">
						<div class="title main">Credential Management API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Credential_Management_API" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Credential_Management_API</a></div>
						<div class="distance smaller"><a href="https://w3c.github.io/webappsec-credential-management/" target="_blank" rel="noopener">https://w3c.github.io/webappsec-credential-management/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Credential Management API</div>
						<div class="row">
							<div class="distance">
								<div>Provides a programmatic interface to the browser's credential management</div>
							</div>
							<div class="distance">
								<div><input id="web-credentials-store-button" disabled="disabled" type="button" class="normal" value="Store random" />&nbsp;<input id="web-credentials-login-button" disabled="disabled" type="button" class="normal" value="Login" /></div>
							</div>
							<div class="distance">
								<div id="web-credentials-info"></div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Credential Management API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
// Create credentials
const pc = new PasswordCredential({
	id: 'username',
	name: 'display name',
	iconURL: 'https://www.example.com/icon.jpg',
	password: 'secret'
});	

// Store
navigator.credentials.store(pc).then(() => { ... });

// Request credentials
navigator.credentials.get({
	password: true,
	mediation: 'optional'
}).then(passwordCredential => { ... });
							</code></pre>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Credential Management API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
// Create credentials
navigator.credentials.create({
	password: {
		id: 'username',
		name: 'display name',
		iconURL: 'https://www.example.com/icon.jpg',
		password: 'secret'
	}
}).then((pc) => { ... store ... });
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Credential Management API</div>
						<div class="distance">
							<div class="small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/PasswordCredential" target="_blank" rel="noopener">PasswordCredential</a></div>
							<div class="smaller">User &amp; password</div>
						</div>
						<div class="distance">
							<div class="small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/FederatedCredential" target="_blank" rel="noopener">FederatedCredential</a></div>
							<div class="smaller">e.g. OpenID Connect, OAuth</div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Credential Management API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column ciu_embed" data-feature="credential-management" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="https://caniuse.com/#feat=credential-management">
								<picture>
									<img src="images/credential-management-2019-3-14.png">
								</picture>
							</a>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Credential Management API</div>
						<div class="distance">
							<div class="distance"><a href="https://w3c.github.io/webauthn/" target="_blank" rel="noopener">Web Authentication</a> extension</div>
							<div class="small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/PublicKeyCredential" target="_blank" rel="noopener">PublicKeyCredential</a></div>
							<div class="smaller">Public key</div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Credential Management API</div>
						<div class="title distance">Browser compatibility</div>
						<div class="column ciu_embed" data-feature="webauthn" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="https://caniuse.com/#feat=webauthn">
								<picture>
									<img src="images/webauthn-2019-3-14.png">
								</picture>
							</a>
						</div>
					</section>
				</section>
				<section id="server-timing-api">
					<section class="header footer title">
						<div class="title main">Server-Timing API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Server-Timing" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Server-Timing</a></div>
						<div class="distance smaller"><a href="https://w3c.github.io/server-timing/#the-server-timing-header-field" target="_blank" rel="noopener">https://w3c.github.io/server-timing/#the-server-timing-header-field</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Server-Timing API</div>
						<div class="row">
							<div class="distance">
								<div>Adds Server-Timing header to HTTP response</div>
							</div>
							<div class="distance">
								<div>The Server-Timing header communicates one or more metrics and descriptions for a given request-response cycle</div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Server-Timing API</div>
						<div class="row">
							<div>Definition</div>
							<pre><code class="javascript stretch">
Server-Timing             = #server-timing-metric
server-timing-metric      = metric-name *( OWS ";" OWS server-timing-param )
metric-name               = token
server-timing-param       = server-timing-param-name OWS "=" OWS server-timing-param-value
server-timing-param-name  = token
server-timing-param-value = token / quoted-string
							</code></pre>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Server-Timing API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
HTTP/1.1 200 OK
...
Server-Timing: longtask; dur=5000.4277; desc="The long task is running"
							</code></pre>
						</div>
					</section>
					<section class="header footer">
						<div class="row">
							<div>Dev-Tools</div>
							<div class="middle">
								<img class="sub" src="images/server-timing.png">
							</div>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Server-Timing API</div>
						<div class="title">Browser compatibility</div>
						<div class="small distance">... it's a HTTP header ...</div>
						<div class="column ciu_embed" data-feature="server-timing" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="https://caniuse.com/#feat=server-timing">
								<picture>
									<img src="images/server-timing-2019-3-16.png">
								</picture>
							</a>
						</div>
					</section>
				</section>
				<section id="navigation-timing-api">
					<section class="header footer title">
						<div class="title main">Navigation Timing API</div>
						<div class="distance small"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API</a></div>
						<div class="distance smaller"><a href="https://www.w3.org/TR/navigation-timing/" target="_blank" rel="noopener">https://www.w3.org/TR/navigation-timing/</a></div>
					</section>
					<section class="footer left">
						<div class="header before">Navigation Timing API</div>
						<div class="row">
							<div class="distance">
								<div>Provides data that can be used to measure the performance of a web site on the client</div>
							</div>
						</div>
					</section>
					<section class="footer left">
						<div class="header before">Navigation Timing API</div>
						<div class="row">
							<div class="distance">
								<div id="nav-timing-domcontent"></div>
								<div id="nav-timing-domcomplete"></div>
							</div>
						</div>
					</section>
					<section class="footer top">
						<div class="header before">Navigation Timing API</div>
						<div class="row">
							<div>Snippet</div>
							<pre><code class="javascript stretch">
const perfEntries = window.performance.getEntriesByType("navigation");
// PerformanceNavigationTiming
perfEntries[0].connectStart
perfEntries[0].connectEnd
perfEntries[0].domComplete
perfEntries[0].domContentLoadedEventStart
perfEntries[0].domContentLoadedEventEnd
perfEntries[0].loadEventStart
perfEntries[0].loadEventEnd 
							</code></pre>
						</div>
					</section>
					<section class="footer">
						<div class="header before">Navigation Timing API</div>
						<div class="title">Browser compatibility</div>
						<div class="small distance">Level 1 vs Level 2?</div>
						<div class="column ciu_embed" data-feature="nav-timing" data-periods="future_1,current,past_1,past_2" data-accessible-colours="false">
							<a href="https://caniuse.com/#feat=nav-timing">
								<picture>
									<img src="images/nav-timing-2019-3-16.png">
								</picture>
							</a>
						</div>
					</section>
				</section>
				<section>
					<section class="footer">
						<div class="header before">Thank you for listening</div>
						<div class="title distance">Web development is <span class="underline">cool</span>!</div>
						<div class="distance">Have fun with all of these Web-APIs</div>
						<div class="big distance">🙌</div>
						<div class="distance">Stay in touch @ <a href="https://dev.karakun.com" target="_blank" rel="noopener">dev.karakun.com</a></div>
						<div class="distance">Follow me on Twitter <a href="https://twitter.com/giftkugel" target="_blank" rel="noopener">@giftkugel</a></div>
					</section>
					<section class="footer">
						<div class="header before">Legal stuff</div>
						<div>
							<div class="distance">Images (CC0) taken from</div>
							<div class="distance">
								<div class="smaller">https://www.pexels.com/photo/camera-cctv-control-monitoring-274895/</div>
								<div class="smaller">https://www.pexels.com/photo/silhouette-of-woman-raising-her-hands-615334/</div>
								<div class="smaller">https://www.pexels.com/photo/man-in-white-shirt-using-macbook-pro-52608/</div>
								<div class="smaller">https://www.pexels.com/photo/bind-blank-blank-page-business-315790/</div>
								<div class="smaller">https://www.pexels.com/photo/building-construction-site-work-38293/</div>
								<div class="smaller">https://www.pexels.com/photo/road-pavement-229014/</div>
							</div>
							<div class="distance">Phone mockups generated with</div>
							<div class="distance">
								<div class="smaller">https://mockuphone.com/#android</div>
							</div>
							<div class="distance">Icons</div>
							<div>
								<div class="smaller">https://material.io/icons/</div>
								<div class="smaller">http://mariodelvalle.github.io/CaptainIconWeb/</div>
								<div class="smaller">https://github.com/alrra/browser-logos</div>
							</div>
						</div>
					</section>
				</section>
			</div>
		</div>
		<div style="display: none" class="extras">
			<div class="header">&nbsp;</div>
			<div class="footer">
				<div>
					<a href="#"/><img src="images/racoon.png" /></a>
					<div><span class="main">Karakun</span>&nbsp;DevHub_</div>
				</div>
				<div><a href="https://www.twitter.com/giftkugel">@giftkugel</a></div>
			</div>
		</div>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<script src="js/caniuse-embed.min.js"></script>
		<script src="lib/js/heartRateSensor.js"></script>
		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				width: "100%",
				height: "100%",
				margin: 0,
				minScale: 1,
				maxScale: 1,
				slideNumber: "c/t",
				center: false,
				display: 'grid',
				history: true,
				pdfMaxPagesPerSlide: 1,
				backgroundTransition: 'slide',
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
			Reveal.addEventListener('ready', function( event ) {
				const slides = document.querySelectorAll('.reveal .slides section');
				const header = document.querySelector('.extras .header');
				const footer = document.querySelector('.extras .footer');

				for (let i = 0; i < slides.length; i++) {
					const slide = slides[i];
					const children = slide.childNodes;
					for (let j = 0; j < children.length; j++) {
						const child = children[j];
						if (child.nodeName === 'SECTION') {
							slide.skip = true;
						}
					}
				}

				for (let i = 0; i < slides.length; i++) {
					const slide = slides[i];
					if (slide.skip) {
						slide.classList.add('wrapper')
						continue;
					}
					slide.classList.add('slide')
					const newChildren = [];
					const before = [];
					const after = [];
					let addHeaderClass = false;
					let addFooterClass = false;
					while (slide.firstChild) {
						const childNode = slide.removeChild(slide.firstChild);
						const newChildNode = childNode.cloneNode(true);
						const wrap = !(newChildNode.classList && (newChildNode.classList.contains('header') || newChildNode.classList.contains('footer')));
						if (wrap) {
							newChildren.push(newChildNode);
						} else {
							if (newChildNode.classList.contains('header')) {
								before.push(newChildNode);
								addHeaderClass = true;
							} else if (newChildNode.classList.contains('footer')) {
								after.push(newChildNode);
								addFooterClass = true;
							}
						}

					}

					if (slide.classList.contains('header')) {
						const newHeader = header.cloneNode(true);
						slide.appendChild(newHeader);
					}

					for (let j = 0; j < before.length; j++) {
						const childNode = before[j];
						slide.appendChild(childNode);
					}
					
					const content = document.createElement('div');
					content.classList.add("content");
					for (let j = 0; j < newChildren.length; j++) {
						const childNode = newChildren[j];
						content.appendChild(childNode);
					}
					slide.appendChild(content);

					for (let j = 0; j < after.length; j++) {
						const childNode = after[j];
						slide.appendChild(childNode);
					}

					if (slide.classList.contains('footer')) {
						const newFooter = footer.cloneNode(true);
						slide.appendChild(newFooter);
					}
					
					if (addHeaderClass) {
						slide.classList.add('header');
					}

					if (addFooterClass) {
						slide.classList.add('footer');
					}
					
				}

				// Battery
				if (navigator.getBattery) {
					navigator.getBattery().then((battery) => {
						const updateChargeInfo = function(event) {
							document.getElementById('battery-charging').textContent = 'Charging: ' + (this.charging ? 'Yes' : 'No');
						}

						const updateLevelInfo = function(event) {
							document.getElementById('battery-status').textContent = 'Current charge level: ' + this.level*100 + '%';
						}
						updateChargeInfo.call(battery);
						updateLevelInfo.call(battery);
						battery.addEventListener('chargingchange', updateChargeInfo);
						battery.addEventListener('levelchange', updateLevelInfo); 
					});
				} else {
					document.getElementById('battery-status').textContent = 'Current charge level: Not supported';
					document.getElementById('battery-status').textContent = 'Charging: Not supported';
				}

				// NavigatorOnline
				const onlineStatus = function(event) {
					const statusText = navigator.onLine ? 'online 🙂' : 'offline 🤨';
					document.getElementById('online-status').textContent = 'Current status: ' + statusText;
				}
				
				onlineStatus();
				window.addEventListener('online', onlineStatus);
				window.addEventListener('offline', onlineStatus);

				// Page Visibility
				const visibilityStatus = function(event) {
					console.log('visibility-status', document.hidden);
					const statusText = document.hidden ? 'not visible 🤨' : 'visible 🙂';
					document.getElementById('visibility-status').textContent = 'Current status: ' + statusText;
				}

				visibilityStatus();
				window.addEventListener('visibilitychange', visibilityStatus);

				// Notification
				if (Notification) {
					const notifyButton = document.getElementById('notification-notify-button');
					notifyButton.onclick = () => {
						const options = {
							body: document.getElementById('notification-input').value,
							icon: 'images/profile.jpg',
							renotify: true,
							tag: Date.now(),
							vibrate: [200, 100, 200],
						}
						const notification = new Notification("A fancy notification", options);
						notification.onclose = () => {
							document.getElementById('notification-status').textContent = '"' + options.body + '" notification was closed by user';
							setTimeout(() => document.getElementById('notification-status').textContent = '', 5000);
						}
					}

					const requestButton = document.getElementById('notification-request-button');
					if (Notification.permission === 'granted') {
						notifyButton.removeAttribute('disabled');
					} else if (Notification.permission !== 'denied') {
						requestButton.removeAttribute('disabled');
						requestButton.onclick = () => {
							try {
								Notification.requestPermission().then(function (permission) {
									if (permission === "granted") {
										notifyButton.removeAttribute('disabled');
										requestButton.setAttribute('disabled', 'disabled');
									}
								});
							} catch (error) {
								Notification.requestPermission(function (permission) {
									if (permission === "granted") {
										notifyButton.removeAttribute('disabled');
										requestButton.setAttribute('disabled', 'disabled');
									}
								});
							}
						};
					}
				}
				
				// Clipboard
				//document.getElementById('clipboard-input').addEventListener('paste', (event) => document.getElementById('clipboard-status').textContent = 'Yay!');


				// Vibration API
				if (navigator.vibrate) {
					document.getElementById('vibration-start-button').removeAttribute('disabled');
					document.getElementById('vibration-stop-button').removeAttribute('disabled');
					document.getElementById('vibration-start-button').addEventListener('click', (event) => setTimeout(() => {
						document.getElementById('vibration-status').textContent = 'Shaking...'
						setTimeout(() => document.getElementById('vibration-status').innerHTML = '&nbsp;', 3000);
						navigator.vibrate([500, 250, 500, 250, 500, 250, 500, 250, 500, 250, 500]);
					}, 5000));
					document.getElementById('vibration-stop-button').addEventListener('click', (event) => navigator.vibrate(0));
				}

				// Speech
				if (window.speechSynthesis) {
					document.getElementById('speech-wrapper').classList.remove('hidden');
					const choice = document.getElementById('speech-voices');

					const fillOptions = () => {
						const voices = window.speechSynthesis.getVoices();
						for (i = 0; i < voices.length ; i++) {
							const option = document.createElement('option');
							option.textContent = voices[i].name + ' (' + voices[i].lang + ')';
							
							if (voices[i].default) {
								option.textContent += ' (default)';
							}

							option.setAttribute('data-lang', voices[i].lang);
							option.setAttribute('data-name', voices[i].name);
							choice.appendChild(option);
						}
					}
					
					if (window.speechSynthesis.addEventListener) {
						window.speechSynthesis.addEventListener('voiceschanged', (event) => {
							fillOptions();
						});
					}
					fillOptions();

					document.getElementById('speech-button').addEventListener('click', (event) => {
						event.preventDefault();
						const value = document.getElementById('speech-input').value;
						const speech = new SpeechSynthesisUtterance(value);
						const voices = window.speechSynthesis.getVoices();
						
						const choice = document.getElementById('speech-voices');
						var selectedOption = choice.selectedOptions[0].getAttribute('data-name');
						for (let i = 0; i < voices.length ; i++) {
							if (voices[i].name === selectedOption) {
								speech.voice = voices[i];
							}
						}
						
						window.speechSynthesis.speak(speech);
					});
				}

				// Web Bluetooth
				if (navigator.bluetooth) {
					document.getElementById('heart-rate-status').textContent = '❤';
					document.getElementById('heart-rate-status-value').textContent = '-';
					document.getElementById('heart-rate-status').addEventListener('click', () => {
						heartRateSensor.connect().then(() => {
							console.log('web bluetooth connected', heartRateSensor.device);
							document.getElementById('heart-rate-status-name').textContent = '(' + heartRateSensor.device.name + ')';
							heartRateSensor.startNotificationsHeartRateMeasurement().then((heartRateMeasurement) => {
								heartRateMeasurement.addEventListener('characteristicvaluechanged', event => {
									const heartRateMeasurement = heartRateSensor.parseHeartRate(event.target.value);
									document.getElementById('heart-rate-status-value').textContent = heartRateMeasurement.heartRate;
								});
							});
						})
						.catch(error => {
							document.getElementById('heart-rate-status-value').textContent = error;
						});
					});
				} else {
					document.getElementById('heart-rate-status').textContent = '❤';
					document.getElementById('heart-rate-status-value').textContent = 'not supported';
				}

				// Web Share
				if (navigator.share) {
					document.getElementById('web-share-button').removeAttribute('disabled');
					document.getElementById('web-share-button').addEventListener('click', () => {
						navigator.share({
							title: 'Web-APIs',
							text: 'Check out this talk — it rocks!',
							url: 'https://giftkugel.github.io/talks/web-api.html#/'
						})
						.then(() => console.log('Yay!'))
						.catch((error) => console.log('D´oh', error));
					});
				}

				// Network Information API
				if (navigator.connection) {
					document.getElementById('network-info-status').textContent = 'Effective network: ' + navigator.connection.effectiveType;
				} else {
					document.getElementById('network-info-status').textContent = 'Effective network: not supported';
				}

				// Web USB
				if (navigator.usb) {
					function setUSBonSlide(device) {
						document.getElementById('web-usb-info').textContent = 'Found: ' + device.productName + '/' + device.manufacturerName;
						document.getElementById('web-usb-button').setAttribute('value', 'Use');
						document.getElementById('web-usb-button').setAttribute('disabled', 'disabled');
					}

					document.getElementById('web-usb-button').removeAttribute('disabled');

					let device = null;
					navigator.usb.getDevices().then(devices => {
						if (devices.length > 0) {
							device = devices[0];
							setUSBonSlide(device);
							
						}
					}).catch(error => {
						console.error('web-usb', error);
					});
					navigator.usb.addEventListener('connect', event => {
						console.log('web-usb-event', event);
						if (event.type === 'connect') {
							device = event.device;
							setUSBonSlide(device);
						}
					});
					navigator.usb.addEventListener('disconnect ', event => {
						console.log('web-usb-event', event);
						if (event.type === 'disconnect ') {
							device = null;
							document.getElementById('web-usb-info').textContent = '';
							document.getElementById('web-usb-button').setAttribute('value', 'Connect');
							document.getElementById('web-usb-button').removeAttribute('disabled');
						}
					});
					document.getElementById('web-usb-button').addEventListener('click', () => {
						try {
							if (device === null) {
								// micro:bit (3368, 516)
								device = navigator.usb.requestDevice({ 
									filters: [{
										vendorId: 3368,
										productId: 516
									}]
								})
								.then(selectedDevice  => {
									device = selectedDevice;
									setUSBonSlide(selectedDevice);
								})
								.catch(error => { console.error('web-usb', error); });
							} else {
								console.log('web-usb use:', device);

								device.open().then(() => {
									if (device.configuration === null) {
										device.selectConfiguration(0).then(() => {
											console.log('web-usb config selected now!');
										})
										.catch(error => { console.error('web-usb', error); });
									} else {
										console.log('web-usb config selected');
										device.claimInterface(3).then(() => {
											console.log('web-usb interface selected');
										})
										.catch(error => { console.error('web-usb', error); });
									}
								});
							}
						} catch (error) {
							console.error('web-usb', error);
						}
					});
					
				}

				// Credentials Managements
				if (navigator.credentials && window.PasswordCredential) {
					document.getElementById('web-credentials-store-button').removeAttribute('disabled');
				
					document.getElementById('web-credentials-store-button').addEventListener('click', event => {
						const suffix =  + Date.now();
						const pc = new PasswordCredential({
							id: 'foo.' + suffix,
							name: 'Mr Foo!',
							iconURL: 'https://giftkugel.github.io/talks/images/profile.jpg',
							password: 'bar.' + suffix
						});	
						navigator.credentials.store(pc).then(() => {
							document.getElementById('web-credentials-info').textContent = "";
							document.getElementById('web-credentials-login-button').removeAttribute('disabled');
						});	
					});

					document.getElementById('web-credentials-login-button').addEventListener('click', event => {
						navigator.credentials.get({
							password: true,
							federated: {
								providers: [
									'https://accounts.google.com'
								]
							},
							mediation: 'optional'
						}).then(passwordCredential => {
							if (passwordCredential) {
								document.getElementById('web-credentials-info').textContent = 'User: ' + passwordCredential.id + "/" + passwordCredential.password;
								console.log(passwordCredential);
							}
						});
					});
				}

				// Server-Timing API only on localhost/expressjs
				if (window.location.host === 'localhost:3000') {
					fetch('longtask'); // Ignore result
					fetch('shorttask'); // Ignore result
				}

				// Navigation Timing API
				if (window.performance) {
					window.addEventListener("load", function load(event) {
						window.removeEventListener("load", load, false);
						
						const perfEntries = performance.getEntriesByType("navigation");

						for (let i=0; i < perfEntries.length; i++) {
							const perfEntry = perfEntries[i];
							console.log("performance entry", perfEntry);
							document.getElementById('nav-timing-domcontent').textContent = "DOM content loaded = " + (perfEntry.domContentLoadedEventEnd - perfEntry.domContentLoadedEventStart).toFixed(2) + "ms";
							document.getElementById('nav-timing-domcomplete').textContent = "DOM complete = " + perfEntry.domComplete.toFixed(2) + "ms";
						}

					});
				}

				// Service Worker
				if ('serviceWorker' in navigator) {
					const urlBase64ToUint8Array = (base64String) => {
						const padding = '='.repeat((4 - base64String.length % 4) % 4);
						const base64 = (base64String + padding)
							.replace(/\-/g, '+')
							.replace(/_/g, '/');

						const rawData = window.atob(base64);
						const outputArray = new Uint8Array(rawData.length);

						for (let i = 0; i < rawData.length; ++i) {
							outputArray[i] = rawData.charCodeAt(i);
						}
						return outputArray;
					}

					//Public Key: BIuCCzjNykFFISt93kuCRBhHW1k7PHmW8qzgaMf4QnyAl3uee2cetZDqE4MQOptLGArxTWrlgqcoKAKw0W4Uv-8
					const applicationServerPublicKey = 'BIuCCzjNykFFISt93kuCRBhHW1k7PHmW8qzgaMf4QnyAl3uee2cetZDqE4MQOptLGArxTWrlgqcoKAKw0W4Uv-8';

					window.addEventListener('load', () => {
						navigator.serviceWorker.register('sw.js').then((registration) => {
							console.log('ServiceWorker registration successful with scope: ', registration.scope);

							// Push API
							if (registration.pushManager) {
								registration.pushManager.getSubscription().then((subscription) => {
									const isSubscribed = !(subscription === null);

									if (isSubscribed) {
										document.getElementById('push-subscription').textContent = JSON.stringify(subscription);
										
										console.log('User IS subscribed.', subscription);
										document.getElementById('push-subscription-content').classList.remove('hidden');
									} else {
										console.log('User is NOT subscribed.');
										document.getElementById('push-request-button').removeAttribute('disabled');
										document.getElementById('push-request-button').addEventListener('click', (event) => {
											if (isSubscribed) {
												// TODO: Unsubscribe user
											} else {
												const applicationServerKey = urlBase64ToUint8Array(applicationServerPublicKey);
												registration.pushManager.subscribe({
													userVisibleOnly: true,
													applicationServerKey: applicationServerKey
												})
												.then((newSubscription) => {
													console.log('User is subscribed.', newSubscription);
													document.getElementById('push-subscription').textContent = JSON.stringify(newSubscription);
													document.getElementById('push-subscription-content').classList.remove('hidden');
													document.getElementById('push-request-button').setAttribute('disabled', 'disabled');
												})
												.catch((error) => {
													console.log('Failed to subscribe the user: ', error);
												});
											}
										});
									}
								
								}, (error) => {
									console.log('ServiceWorker registration failed: ', error);
								});
							} else {
								document.getElementById('push-subscription').textContent = 'PushManager not supported';
								document.getElementById('push-subscription-content').classList.remove('hidden');
							}

							// Background Sync
							if (registration.sync) {
								registration.sync.register('web-api-sync');
							} else {
								console.log('Background Sync not available');
							}
						});
					});
				}
				
			} );
		</script>
	</body>
</html>
